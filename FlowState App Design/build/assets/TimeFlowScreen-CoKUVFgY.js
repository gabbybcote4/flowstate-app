import{u as w,r as p,j as e,m as N,q as D,aj as z,S as A,p as B,H as F,ag as H,ah as $,T as E,ai as I,X as O,Y as k}from"./index-CmR80Uol.js";import{D as P,H as L,u as C,a as R}from"./index-BJWZqmkL.js";import{A as G}from"./arrow-left-K5VJi_HT.js";import{C as J}from"./circle-alert-D3xT5W4v.js";import{P as Y}from"./palette-Bihcbgjf.js";const f=[{name:"Health",color:"#D8B4FE",icon:e.jsx(F,{size:16}),gradient:"from-purple-200 to-pink-200"},{name:"Work",color:"#FBBF24",icon:e.jsx(H,{size:16}),gradient:"from-amber-200 to-orange-200"},{name:"Relationships",color:"#FCA5A5",icon:e.jsx($,{size:16}),gradient:"from-rose-200 to-pink-200"},{name:"Personal Growth",color:"#A5B4FC",icon:e.jsx(E,{size:16}),gradient:"from-indigo-200 to-purple-200"},{name:"Creativity",color:"#FCD34D",icon:e.jsx(Y,{size:16}),gradient:"from-yellow-200 to-amber-200"},{name:"Home",color:"#A7F3D0",icon:e.jsx(I,{size:16}),gradient:"from-emerald-200 to-teal-200"}],U=()=>{const l=[];for(let i=6;i<23;i++){const a=`${i.toString().padStart(2,"0")}:00`,o=`${(i+1).toString().padStart(2,"0")}:00`;l.push({startTime:a,endTime:o,hour:i})}return l},M=U();function W({habit:l}){const{themeColors:i}=w(),a=f.find(n=>n.name===l.lifeArea),[{isDragging:o},c]=C(()=>({type:"habit",item:{habit:l},collect:n=>({isDragging:n.isDragging()})}));return e.jsx("div",{ref:c,className:`px-3 py-2 rounded-lg border cursor-move transition-all ${o?"opacity-50 scale-95":"opacity-100"}`,style:{borderColor:a?.color||i.primary,backgroundColor:`${a?.color}15`},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-shrink-0",style:{color:a?.color},children:a?.icon}),e.jsx("p",{className:"text-sm truncate flex-1",children:l.name})]})})}function _({todo:l}){const{themeColors:i}=w(),a=f.find(n=>n.name===l.lifeArea),[{isDragging:o},c]=C(()=>({type:"todo",item:{todo:l},collect:n=>({isDragging:n.isDragging()})}));return e.jsx("div",{ref:c,className:`px-3 py-2 rounded-lg border cursor-move transition-all ${o?"opacity-50 scale-95":"opacity-100"} ${l.completed?"opacity-50":""}`,style:{borderColor:a?.color||"#a78bfa",backgroundColor:a?`${a.color}15`:"#f3e8ff"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx("div",{className:"flex-shrink-0",style:{color:a.color},children:a.icon}),e.jsx("p",{className:`text-sm truncate flex-1 ${l.completed?"line-through":""}`,children:l.title})]})})}function q({slot:l,blocks:i,onDrop:a,onRemove:o}){const{themeColors:c}=w(),[{isOver:n},u]=R(()=>({accept:["habit","todo"],drop:t=>{a(t,l.startTime)},collect:t=>({isOver:t.isOver()})})),g=i.length>0;return e.jsxs("div",{className:"flex gap-0",children:[e.jsx("div",{className:"w-16 flex-shrink-0 flex items-start justify-center pt-3",children:e.jsx("span",{className:"text-xs opacity-50",children:l.startTime})}),e.jsx("div",{className:"w-2 flex-shrink-0 relative",children:g?e.jsx("div",{className:"absolute inset-0 flex flex-col",children:i.map((t,d)=>{const h=f.find(S=>S.name===t.lifeArea)?.color||c.primary;return e.jsx(N.div,{initial:{scaleY:0},animate:{scaleY:1},className:"flex-1 rounded-sm",style:{backgroundColor:h,marginBottom:d<i.length-1?"2px":"0"}},t.id)})}):e.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-sm"})}),e.jsx("div",{ref:u,className:`flex-1 min-h-[60px] p-2 rounded-xl transition-all ${n?"bg-lavender-50 border-2 border-dashed border-lavender-300":"bg-gray-50 border border-transparent"}`,children:g?e.jsx("div",{className:"space-y-2",children:i.map(t=>{const d=f.find(h=>h.name===t.lifeArea),y=d?.gradient||"from-lavender-200 to-purple-200";return e.jsxs(N.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`p-3 rounded-lg bg-gradient-to-r ${y} relative group`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{style:{color:d?.color||c.primary},children:d?.icon||e.jsx(A,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm truncate",children:t.habitName||t.todoName||"Untitled"}),e.jsxs("p",{className:"text-xs opacity-60",children:[t.startTime," - ",t.endTime]})]})]}),e.jsx("button",{onClick:()=>o(t.id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-white/30 rounded",children:e.jsx(O,{size:14})})]}),e.jsxs("div",{className:"mt-1 text-xs opacity-70 flex items-center gap-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-white/40 rounded",children:t.lifeArea}),t.isFlexible&&e.jsx("span",{className:"px-2 py-0.5 bg-white/40 rounded",children:"Flexible"})]})]},t.id)})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-xs opacity-30",children:"Drop habit or todo here"})})})]})}function ee({onNavigate:l}){const{themeColors:i}=w(),[a,o]=p.useState([]),[c,n]=p.useState([]),[u,g]=p.useState([]),[t,d]=p.useState(!0);p.useEffect(()=>{const s=localStorage.getItem("flowstate-timeblocks");s&&o(JSON.parse(s));const r=localStorage.getItem("flowstate-habits");if(r){const m=JSON.parse(r);n(m.filter(x=>x.isActive))}const j=localStorage.getItem("flowstate-routine-templates");if(j){const m=JSON.parse(j),x=[];["low","moderate","good"].forEach(b=>{m[b]&&m[b].forEach(v=>{x.push({id:v.id.toString(),title:v.title,completed:v.completed,lifeArea:y(v.title)})})}),g(x.filter(b=>!b.completed))}},[]),p.useEffect(()=>{(a.length>0||localStorage.getItem("flowstate-timeblocks"))&&localStorage.setItem("flowstate-timeblocks",JSON.stringify(a))},[a]);const y=s=>{const r=s.toLowerCase();return r.includes("work")||r.includes("project")||r.includes("meeting")?"Work":r.includes("exercise")||r.includes("health")||r.includes("workout")||r.includes("meditat")?"Health":r.includes("social")||r.includes("friend")||r.includes("family")?"Relationships":r.includes("learn")||r.includes("read")||r.includes("study")?"Personal Growth":r.includes("creative")||r.includes("art")||r.includes("music")?"Creativity":r.includes("home")||r.includes("clean")||r.includes("tidy")?"Home":"Personal Growth"},h=(s,r)=>{const[j]=r.split(":").map(Number),m=`${(j+1).toString().padStart(2,"0")}:00`,x={id:Date.now().toString(),startTime:r,endTime:m,lifeArea:s.habit?.lifeArea||s.todo?.lifeArea||"Personal Growth",habitId:s.habit?.id,habitName:s.habit?.name,todoId:s.todo?.id,todoName:s.todo?.title,isFlexible:!1};o([...a,x]),k.success("Added to timeline")},S=s=>{o(a.filter(r=>r.id!==s)),k.success("Removed from timeline")},T=s=>a.filter(r=>r.startTime===s);return e.jsx(P,{backend:L,children:e.jsxs("div",{className:"min-h-screen pb-24",style:{backgroundColor:i.background},children:[e.jsxs(N.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white border-b border-gray-100 px-6 py-4 sticky top-0 z-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l&&e.jsx("button",{onClick:()=>l("home"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(G,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(D,{size:24,style:{color:i.primary}}),"Time Flow"]}),e.jsx("p",{className:"text-sm opacity-60",children:"Visual timeline & scheduler"})]})]}),e.jsxs("button",{onClick:()=>d(!t),className:"px-4 py-2 rounded-2xl text-sm transition-all",style:{backgroundColor:t?i.primary:"#f3f4f6",color:t?"white":"#374151"},children:[t?"Hide":"Show"," Sidebar"]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:f.map(s=>e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs whitespace-nowrap",style:{backgroundColor:`${s.color}20`,border:`1px solid ${s.color}40`},children:[e.jsx("div",{style:{color:s.color},children:s.icon}),e.jsx("span",{children:s.name})]},s.name))})]}),e.jsxs("div",{className:"flex gap-6 p-6",children:[e.jsx(z,{children:t&&e.jsxs(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-80 flex-shrink-0 space-y-4",children:[c.length>0&&e.jsxs("div",{className:"bg-white rounded-3xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"text-sm opacity-70 mb-3 flex items-center gap-2",children:[e.jsx(A,{size:16,style:{color:i.primary}}),"Your Habits"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-hide",children:c.slice(0,10).map(s=>e.jsx(W,{habit:s},s.id))})]}),u.length>0&&e.jsxs("div",{className:"bg-white rounded-3xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"text-sm opacity-70 mb-3 flex items-center gap-2",children:[e.jsx(B,{size:16,style:{color:i.primary}}),"Today's Tasks"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-hide",children:u.slice(0,10).map(s=>e.jsx(_,{todo:s},s.id))})]}),e.jsx("div",{className:"bg-gradient-to-br from-lavender-50 to-purple-50 rounded-3xl p-4 border border-lavender-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{size:16,className:"text-lavender-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs opacity-70",children:[e.jsx("p",{className:"mb-2",children:"Drag habits or tasks onto time slots to schedule your day."}),e.jsx("p",{children:"Colored bars show life area balance at a glance."})]})]})})]})}),e.jsx("div",{className:"flex-1 bg-white rounded-3xl p-6 shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"space-y-0",children:M.map(s=>e.jsx(q,{slot:s,blocks:T(s.startTime),onDrop:h,onRemove:S},s.startTime))})})]})]})})}export{ee as default};
