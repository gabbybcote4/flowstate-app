import{a6 as ke,a7 as Z,a8 as Se,r as u,a9 as Ce,aa as Ae,ab as Ie,ac as ze,ad as ee,ae as Te,af as He,m as d,j as e,ag as De,c as ge,u as Q,T as fe,l as J,Q as E,S as K,A as W,ah as X,X as O,Z as ne,o as ie,H as Le,V as H,ai as re,a4 as Me,p as le,aj as Ee,ak as $e,al as qe,J as Re,am as We}from"./index-Dh3uFWtn.js";import{G as Oe}from"./gift-DS3CjRJd.js";import{A as Pe}from"./award-DAMyKCk_.js";import{A as Fe}from"./arrow-left-B6U7nkP4.js";import{A as Ge}from"./arrow-right-ByzZypoJ.js";import{a as oe,C as te}from"./LifeAreaFilterChips-CsQrv53W.js";import{P as V}from"./plus-C3nr80uk.js";import{C as Be}from"./circle-alert-Bsdov2cC.js";function Ye(...s){const i=!Array.isArray(s[0]),r=i?0:-1,l=s[0+r],n=s[1+r],c=s[2+r],x=s[3+r],m=ke(n,c,x);return i?m(l):m}function be(s){const i=Z(()=>Se(s)),{isStatic:r}=u.useContext(Ce);if(r){const[,l]=u.useState(s);u.useEffect(()=>i.on("change",l),[])}return i}function je(s,i){const r=be(i()),l=()=>r.set(i());return l(),Ae(()=>{const n=()=>Ie.preRender(l,!1,!0),c=s.map(x=>x.on("change",n));return()=>{c.forEach(x=>x()),ze(l)}}),r}function _e(s){ee.current=[],s();const i=je(ee.current,s);return ee.current=void 0,i}function Ve(s,i,r,l){if(typeof s=="function")return _e(s);const n=typeof i=="function"?i:Ye(i,r,l);return Array.isArray(s)?ce(s,n):ce([s],([c])=>n(c))}function ce(s,i){const r=Z(()=>[]);return je(s,()=>{r.length=0;const l=s.length;for(let n=0;n<l;n++)r[n]=s[n].get();return i(r)})}const ve=u.createContext(null);function Je(s,i,r,l){if(!l)return s;const n=s.findIndex(N=>N.value===i);if(n===-1)return s;const c=l>0?1:-1,x=s[n+c];if(!x)return s;const m=s[n],y=x.layout,w=Te(y.min,y.max,.5);return c===1&&m.layout.max+r>w||c===-1&&m.layout.min+r<w?He(s,n,n+c):s}function Ke({children:s,as:i="ul",axis:r="y",onReorder:l,values:n,...c},x){const m=Z(()=>d[i]),y=[],w=u.useRef(!1),N={axis:r,registerItem:(b,g)=>{const j=y.findIndex(k=>b===k.value);j!==-1?y[j].layout=g[r]:y.push({value:b,layout:g[r]}),y.sort(Ze)},updateOrder:(b,g,j)=>{if(w.current)return;const k=Je(y,b,g,j);y!==k&&(w.current=!0,l(k.map(Xe).filter(A=>n.indexOf(A)!==-1)))}};return u.useEffect(()=>{w.current=!1}),e.jsx(m,{...c,ref:x,ignoreStrict:!0,children:e.jsx(ve.Provider,{value:N,children:s})})}const Ue=u.forwardRef(Ke);function Xe(s){return s.value}function Ze(s,i){return s.layout.min-i.layout.min}function de(s,i=0){return De(s)?s:be(i)}function Qe({children:s,style:i={},value:r,as:l="li",onDrag:n,layout:c=!0,...x},m){const y=Z(()=>d[l]),w=u.useContext(ve),N={x:de(i.x),y:de(i.y)},b=Ve([N.x,N.y],([A,S])=>A||S?1:"unset"),{axis:g,registerItem:j,updateOrder:k}=w;return e.jsx(y,{drag:g,...x,dragSnapToOrigin:!0,style:{...i,x:N.x,y:N.y,zIndex:b},layout:c,onDrag:(A,S)=>{const{velocity:I}=S;I[g]&&k(r,N[g].get(),I[g]),n&&n(A,S)},onLayoutMeasure:A=>j(r,A),ref:m,ignoreStrict:!0,children:s})}const et=u.forwardRef(Qe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],me=ge("arrow-down",tt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],at=ge("save",st);function it({habits:s}){const{themeColors:i}=Q(),r=new Date().toDateString(),l=s.filter(x=>x.frequency==="multiple-daily"&&x.timeSlots?x.timeSlots.every(m=>(x.completedSlots||[]).some(y=>y.date===r&&y.slotId===m.id)):(x.completedSlots||[]).some(m=>m.date===r)).length,n=s.length>0?Math.round(l/s.length*100):0,c=s.length-l;return s.length===0?null:e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-md p-5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center",style:{backgroundColor:`${i.primary}20`},children:e.jsx(fe,{size:18,style:{color:i.primary}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm",children:"Today's Progress"}),e.jsxs("p",{className:"text-xs opacity-60",children:[l," of ",s.length," completed"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl",style:{color:i.primary},children:[n,"%"]}),e.jsx("p",{className:"text-xs opacity-60",children:"complete"})]})]}),e.jsxs("div",{className:"relative w-full h-3 bg-gray-100 rounded-full overflow-hidden mb-4",children:[e.jsx(d.div,{initial:{width:0},animate:{width:`${n}%`},transition:{duration:1,ease:"easeOut",delay:.2},className:"h-full rounded-full",style:{background:`linear-gradient(to right, ${i.primary}, ${i.primaryDark})`}}),e.jsx("div",{className:"absolute top-0 left-1/4 w-0.5 h-full bg-white/40"}),e.jsx("div",{className:"absolute top-0 left-1/2 w-0.5 h-full bg-white/40"}),e.jsx("div",{className:"absolute top-0 left-3/4 w-0.5 h-full bg-white/40"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(J,{size:16,className:"text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-lg text-green-700",children:l}),e.jsx("div",{className:"text-xs text-green-600 opacity-80 truncate",children:"Done today"})]})]}),e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},className:"rounded-xl p-3 flex items-center gap-2",style:{background:`linear-gradient(to bottom right, ${i.gradientTo}, ${i.gradientFrom})`},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:i.primary},children:e.jsx(E,{size:16,className:"text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-lg",style:{color:i.primaryDark},children:c}),e.jsx("div",{className:"text-xs opacity-70 truncate",children:c===0?"All done!":"To go"})]})]})]}),n===100&&e.jsx(d.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-3 p-3 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-xl border border-amber-200",children:e.jsx("p",{className:"text-xs text-amber-800 text-center",children:"ðŸŽ‰ Amazing! You completed all your habits today!"})}),n>=75&&n<100&&e.jsx(d.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-800 text-center",children:["â­ Almost there! Just ",c," more to go!"]})}),n>=50&&n<75&&e.jsx(d.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-3 p-3 rounded-xl border",style:{background:`linear-gradient(to right, ${i.gradientTo}, ${i.gradientFrom})`,borderColor:i.primary+"40"},children:e.jsx("p",{className:"text-xs text-center opacity-80",children:"ðŸ’« You're halfway there! Keep up the momentum!"})})]})}function rt({position:s="top-right",onAddHabit:i}){const[r,l]=u.useState(!1),[n,c]=u.useState(!1);u.useEffect(()=>{try{localStorage.getItem("flowstate-ai-minimized")==="true"&&l(!0)}catch(j){console.error("Error loading minimized state:",j)}},[]);const x=()=>{const j={sleep:"7h 20m",steps:"3,421"},k=parseFloat(j.sleep),A=parseInt(j.steps.replace(",","")),S=[];k<7?S.push({id:"low-sleep",text:"Try a 10-minute power nap",reason:"You got less than 7 hours of sleep",icon:"ðŸ˜´"}):k>=7&&k<8?S.push({id:"good-sleep",text:"Start with a light stretch",reason:"Your sleep was decent, perfect for gentle movement",icon:"ðŸŒ±"}):S.push({id:"great-sleep",text:"Consider a morning walk",reason:"You slept well! Energy is good for light activity",icon:"ðŸš¶"}),A<2e3?S.push({id:"low-steps",text:"Take a 5-minute walk break",reason:"Low step count today",icon:"ðŸ‘Ÿ"}):A>=2e3&&A<5e3&&S.push({id:"moderate-steps",text:"Hydrate with 500ml of water",reason:"You're moving well, stay hydrated",icon:"ðŸ’§"});const I=new Date().getHours();return I>=6&&I<9?S.push({id:"morning-routine",text:"Start with gentle morning meditation",reason:"Morning is ideal for mindfulness",icon:"ðŸ§˜"}):I>=14&&I<17?S.push({id:"afternoon-dip",text:"Combat afternoon slump with a stretch",reason:"Energy naturally dips in afternoon",icon:"ðŸŒ¿"}):I>=18&&I<22&&S.push({id:"evening-wind",text:"Wind down with evening journaling",reason:"Evening is perfect for reflection",icon:"ðŸ“”"}),S[Math.floor(Math.random()*S.length)]},[m,y]=u.useState(x()),w=()=>{try{localStorage.setItem("flowstate-ai-minimized","true"),l(!0)}catch(j){console.error("Error saving minimized state:",j)}},N=()=>{try{localStorage.setItem("flowstate-ai-minimized","false"),l(!1),y(x()),c(!1)}catch(j){console.error("Error saving minimized state:",j)}},b=()=>{i&&i(m.text,m.reason),c(!0),setTimeout(()=>{w()},1500)},g=s==="bottom-left"?"fixed bottom-24 left-4 z-50":"fixed top-6 right-4 z-50";return e.jsx("div",{className:g,children:r?e.jsxs(d.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:N,className:"w-14 h-14 bg-gradient-to-br from-lavender-400 to-purple-400 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center relative","aria-label":"Open AI suggestions",children:[e.jsx(d.div,{animate:{rotate:[0,10,-10,10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:e.jsx(K,{size:24,className:"text-white"})}),e.jsx(d.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-4 h-4 bg-pink-400 rounded-full border-2 border-white"})]}):e.jsx(W,{children:e.jsx(d.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"w-80 max-w-[calc(100vw-2rem)]",children:e.jsxs("div",{className:"bg-gradient-to-br from-lavender-100 to-purple-100 rounded-3xl shadow-2xl border-2 border-lavender-200 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-lavender-200 rounded-full opacity-20 blur-2xl -mr-16 -mt-16"}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,repeat:n?0:1/0,repeatType:"reverse",repeatDelay:3},className:"w-10 h-10 bg-white rounded-2xl shadow-sm flex items-center justify-center",children:n?e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},children:e.jsx(X,{size:20,className:"text-green-500"})}):e.jsx(K,{size:20,className:"text-lavender-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lavender-700",children:"AI Suggestion"}),e.jsx("span",{className:"text-xs bg-lavender-200 text-lavender-700 px-2 py-0.5 rounded-full",children:"Daily"})]})]}),e.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-white/50 transition-colors","aria-label":"Minimize suggestion",children:e.jsx(O,{size:18,className:"opacity-60"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:m.icon}),e.jsx("p",{className:"text-lavender-900",children:m.text})]}),e.jsx("p",{className:"text-sm opacity-70 pl-9",children:m.reason})]}),!n&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:b,className:"w-full px-4 py-2.5 rounded-2xl bg-lavender-400 text-white hover:bg-lavender-500 transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center gap-2",children:[e.jsx(X,{size:16}),e.jsx("span",{children:"Add to my day"})]}),e.jsx("button",{onClick:w,className:"w-full px-4 py-2 rounded-2xl bg-white/80 text-lavender-700 hover:bg-white transition-colors text-sm",children:"Maybe later"})]}),n&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-2 text-green-600",children:"âœ“ Added to your routine!"})]}),e.jsx(d.div,{className:"h-1 bg-gradient-to-r from-lavender-400 via-purple-400 to-lavender-400",initial:{scaleX:0},animate:{scaleX:1},transition:{duration:1,ease:"easeOut"}})]})})})})}const xe=[{name:"Health",icon:"ðŸ’š",color:"#10b981",description:"Physical wellness and vitality"},{name:"Creativity",icon:"ðŸŽ¨",color:"#a78bfa",description:"Creative expression"},{name:"Work",icon:"ðŸ’¼",color:"#3b82f6",description:"Career and professional growth"},{name:"Relationships",icon:"ðŸ’•",color:"#ec4899",description:"Connections and community"},{name:"Learning",icon:"ðŸ“š",color:"#f59e0b",description:"Knowledge and growth"},{name:"Home",icon:"ðŸ¡",color:"#8b5cf6",description:"Living space and comfort"}],pe=[{goal:"Get fitter",area:"Health",actions:["Walk 10 minutes daily","Stretch for 5 minutes","Drink more water"]},{goal:"Learn a new skill",area:"Learning",actions:["Read 10 pages daily","Practice 15 minutes","Watch one tutorial"]},{goal:"Improve relationships",area:"Relationships",actions:["Text a friend daily","Have one meaningful conversation","Express gratitude"]},{goal:"Be more creative",area:"Creativity",actions:["Doodle for 5 minutes","Write 3 ideas","Try something new"]},{goal:"Advance my career",area:"Work",actions:["Learn one new thing","Complete one priority task","Network with someone"]},{goal:"Create a peaceful home",area:"Home",actions:["Tidy one surface","Light a candle","Open the windows"]}],nt=[{trigger:"After I wake up",icon:"â˜€ï¸"},{trigger:"After breakfast",icon:"ðŸ³"},{trigger:"During lunch break",icon:"ðŸ¥—"},{trigger:"After work",icon:"ðŸ "},{trigger:"Before dinner",icon:"ðŸŒ†"},{trigger:"After dinner",icon:"ðŸŒ™"},{trigger:"Before bed",icon:"ðŸ˜´"}],lt=[{reward:"Feel proud of myself",icon:"ðŸ’ª"},{reward:"Share my progress",icon:"ðŸ“±"},{reward:"Enjoy a treat",icon:"ðŸª"},{reward:"Relax guilt-free",icon:"ðŸ˜Œ"},{reward:"Check it off my list",icon:"âœ…"},{reward:"Celebrate the win",icon:"ðŸŽ‰"}],ue=["Small steps create big changes ðŸŒ±","You're building something meaningful âœ¨","Every habit starts with one decision ðŸ’«","Progress over perfection, always ðŸŽ¯","You're investing in your future self ðŸŒŸ","Consistency is the secret ingredient ðŸ”‘","You deserve this growth ðŸ’š"];function ot({onComplete:s,onClose:i}){const{themeColors:r}=Q(),[l,n]=u.useState(1),[c,x]=u.useState(""),[m,y]=u.useState("Health"),[w,N]=u.useState(""),[b,g]=u.useState(""),[j,k]=u.useState(""),[A,S]=u.useState(""),[I,$]=u.useState(""),[D,P]=u.useState("");u.useEffect(()=>{P(ue[Math.floor(Math.random()*ue.length)])},[l]);const F=()=>{if(l===1&&!c.trim()){H.error("Please enter your goal");return}if(l===2&&!w.trim()){H.error("Please choose a small action");return}if(l===3&&!b&&!A){H.error("Please select or enter a trigger");return}l<4?n(l+1):B()},G=()=>{l>1&&n(l-1)},B=()=>{const p={id:Date.now().toString(),name:w,purpose:c,frequency:"daily",trigger:A||b,motivation:I||j||"Feel accomplished",lifeArea:m,streak:0,completedSlots:[],isActive:!0,createdAt:new Date().toISOString(),fromGoalWizard:!0};s(p),H.success("ðŸŽ‰ Your habit has been created!")},Y=p=>{x(p.goal),y(p.area)},q=l/4*100;return e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:i,children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:p=>p.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 sticky top-0 bg-white z-10 rounded-t-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center",style:{backgroundColor:`${r.primary}20`},children:e.jsx(E,{size:24,style:{color:r.primary}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-0",children:"Goal to Habit Wizard"}),e.jsx("p",{className:"text-sm opacity-60",children:"Let's break down your goal together"})]})]}),e.jsx("button",{onClick:i,className:"w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors",children:e.jsx(O,{size:20})})]}),e.jsx("div",{className:"relative h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx(d.div,{className:"absolute inset-y-0 left-0 rounded-full",style:{backgroundColor:r.primary},initial:{width:0},animate:{width:`${q}%`},transition:{duration:.3}})}),e.jsxs("div",{className:"flex justify-between text-xs opacity-60 mt-2",children:[e.jsxs("span",{children:["Step ",l," of 4"]}),e.jsxs("span",{children:[Math.round(q),"% Complete"]})]})]}),e.jsx("div",{className:"p-8",children:e.jsxs(W,{mode:"wait",children:[l===1&&e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4",style:{backgroundColor:`${r.primary}15`},children:e.jsx(E,{size:32,style:{color:r.primary}})}),e.jsx("h3",{className:"mb-2",children:"What's your goal?"}),e.jsx("p",{className:"text-sm opacity-70 max-w-md mx-auto",children:"Think big! We'll help you break it down into small, achievable steps."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2 opacity-70",children:"Your goal"}),e.jsx("input",{type:"text",value:c,onChange:p=>x(p.target.value),placeholder:"e.g., Get fitter, Learn guitar, Write more...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:border-lavender-300 transition-colors",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-70 mb-3",children:"Or choose an example:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:pe.map((p,T)=>e.jsx(d.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:T*.05},onClick:()=>Y(p),className:"text-left p-4 rounded-xl border-2 border-gray-200 hover:border-lavender-300 transition-all",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xl",children:xe.find(R=>R.name===p.area)?.icon}),e.jsx("span",{className:"text-sm opacity-90",children:p.goal})]})},T))})]}),e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center p-4 rounded-2xl",style:{backgroundColor:`${r.primary}10`},children:e.jsx("p",{className:"text-sm",style:{color:r.primary},children:D})})]},"step1"),l===2&&e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4",style:{backgroundColor:`${r.primary}15`},children:e.jsx(ne,{size:32,style:{color:r.primary}})}),e.jsx("h3",{className:"mb-2",children:"What's one small action?"}),e.jsx("p",{className:"text-sm opacity-70 max-w-md mx-auto",children:"Choose something so small it feels almost silly. That's the secret to building lasting habits."})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 border-2 border-gray-100",children:[e.jsx("div",{className:"text-xs opacity-60 mb-1",children:"Your goal"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{size:16,className:"opacity-60"}),e.jsx("span",{children:c})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2 opacity-70",children:"Small daily action"}),e.jsx("input",{type:"text",value:w,onChange:p=>N(p.target.value),placeholder:"e.g., Walk for 10 minutes",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:border-lavender-300 transition-colors",autoFocus:!0})]}),c&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm opacity-70 mb-3",children:['Suggested actions for "',c,'":']}),e.jsx("div",{className:"space-y-2",children:pe.find(p=>p.goal.toLowerCase().includes(c.toLowerCase().split(" ")[0]))?.actions.map((p,T)=>e.jsxs(d.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:T*.05},onClick:()=>N(p),className:"w-full text-left p-3 rounded-xl border-2 border-gray-200 hover:border-lavender-300 transition-all flex items-center gap-3",children:[e.jsx(J,{size:18,className:"opacity-60"}),e.jsx("span",{className:"text-sm",children:p})]},T))||e.jsx("div",{className:"text-center py-4 text-sm opacity-60",children:"Enter a small action that moves you toward your goal"})})]}),e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center p-4 rounded-2xl",style:{backgroundColor:`${r.primary}10`},children:e.jsx("p",{className:"text-sm",style:{color:r.primary},children:D})})]},"step2"),l===3&&e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4",style:{backgroundColor:`${r.primary}15`},children:e.jsx(K,{size:32,style:{color:r.primary}})}),e.jsx("h3",{className:"mb-2",children:"Set your trigger & reward"}),e.jsx("p",{className:"text-sm opacity-70 max-w-md mx-auto",children:"Triggers help you remember. Rewards make it stick."})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-lavender-50 to-peach-50 border-2 border-lavender-100",children:[e.jsx("div",{className:"text-xs opacity-60 mb-2",children:"Your habit so far"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(E,{size:16,className:"opacity-60 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-60",children:"Goal"}),e.jsx("div",{className:"text-sm",children:c})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ne,{size:16,className:"opacity-60 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-60",children:"Action"}),e.jsx("div",{className:"text-sm",children:w})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-2 opacity-70 flex items-center gap-2",children:[e.jsx(ie,{size:16}),"When will you do this?"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:nt.map((p,T)=>e.jsxs(d.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:T*.03},onClick:()=>{g(p.trigger),S("")},className:`p-3 rounded-xl border-2 transition-all text-sm ${b===p.trigger?"border-lavender-400 bg-lavender-50":"border-gray-200 hover:border-lavender-200"}`,children:[e.jsx("span",{className:"mr-2",children:p.icon}),p.trigger]},T))}),e.jsx("input",{type:"text",value:A,onChange:p=>{S(p.target.value),g("")},placeholder:"Or write your own trigger...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:border-lavender-300 transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-2 opacity-70 flex items-center gap-2",children:[e.jsx(Oe,{size:16}),"How will you celebrate?"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:lt.map((p,T)=>e.jsxs(d.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:T*.03},onClick:()=>{k(p.reward),$("")},className:`p-3 rounded-xl border-2 transition-all text-sm ${j===p.reward?"border-peach-400 bg-peach-50":"border-gray-200 hover:border-peach-200"}`,children:[e.jsx("span",{className:"mr-2",children:p.icon}),p.reward]},T))}),e.jsx("input",{type:"text",value:I,onChange:p=>{$(p.target.value),k("")},placeholder:"Or write your own reward...",className:"w-full px-4 py-3 rounded-2xl border-2 border-gray-200 focus:outline-none focus:border-peach-300 transition-colors"})]}),e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center p-4 rounded-2xl",style:{backgroundColor:`${r.primary}10`},children:e.jsx("p",{className:"text-sm",style:{color:r.primary},children:D})})]},"step3"),l===4&&e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(d.div,{initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{type:"spring",delay:.2},className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4",style:{backgroundColor:`${r.primary}15`},children:e.jsx(Le,{size:32,style:{color:r.primary}})}),e.jsx("h3",{className:"mb-2",children:"Which life area?"}),e.jsx("p",{className:"text-sm opacity-70 max-w-md mx-auto",children:"Choose where this habit fits in your life. This helps you see your holistic growth."})]}),e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-5 rounded-2xl bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(fe,{size:18,className:"text-green-600"}),e.jsx("div",{className:"text-sm opacity-70",children:"Your new habit"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"opacity-60",children:"Goal: "}),e.jsx("span",{children:c})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-60",children:"Action: "}),e.jsx("span",{children:w})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-60",children:"Trigger: "}),e.jsx("span",{children:A||b})]}),e.jsxs("div",{children:[e.jsx("span",{className:"opacity-60",children:"Reward: "}),e.jsx("span",{children:I||j||"Feel accomplished"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-3 opacity-70",children:"Choose your life area"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:xe.map((p,T)=>e.jsxs(d.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:T*.05},onClick:()=>y(p.name),className:`p-4 rounded-2xl border-2 transition-all ${m===p.name?"shadow-lg scale-105":"hover:shadow-md"}`,style:{borderColor:m===p.name?p.color:"#e5e7eb",backgroundColor:m===p.name?`${p.color}10`:"white"},children:[e.jsx("div",{className:"text-3xl mb-2",children:p.icon}),e.jsx("div",{className:"text-sm mb-1",children:p.name}),e.jsx("div",{className:"text-xs opacity-60",children:p.description})]},p.name))})]}),e.jsxs(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:"text-center p-6 rounded-2xl",style:{backgroundColor:`${r.primary}10`},children:[e.jsx(Pe,{size:32,className:"mx-auto mb-2",style:{color:r.primary}}),e.jsx("p",{style:{color:r.primary},children:"You're about to create something beautiful. Ready to start your journey?"})]})]},"step4")]})}),e.jsx("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-3xl",children:e.jsxs("div",{className:"flex gap-3",children:[l>1&&e.jsxs(d.button,{initial:{opacity:0},animate:{opacity:1},onClick:G,className:"px-6 py-3 rounded-2xl border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center gap-2",children:[e.jsx(Fe,{size:18}),"Back"]}),e.jsx(d.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:F,className:"flex-1 py-4 rounded-2xl text-white flex items-center justify-center gap-2 shadow-lg transition-all",style:{backgroundColor:r.primary},children:l===4?e.jsxs(e.Fragment,{children:[e.jsx(J,{size:20}),"Create My Habit"]}):e.jsxs(e.Fragment,{children:["Continue",e.jsx(Ge,{size:20})]})})]})})]})})}const se=[{id:"morning",label:"Morning",emoji:"ðŸŒ…",description:"6am - 12pm"},{id:"afternoon",label:"Afternoon",emoji:"â˜€ï¸",description:"12pm - 5pm"},{id:"evening",label:"Evening",emoji:"ðŸŒ†",description:"5pm - 9pm"},{id:"night",label:"Night",emoji:"ðŸŒ™",description:"9pm - 12am"}],he=["Keep stacks tiny to start â€” 2-3 habits max","Choose habits that naturally flow together","Stack new habits onto existing strong ones","Make it so easy you can't say no","Use physical locations as triggers","The best stack is the one you'll actually do"];function ct(){const{themeColors:s}=Q(),[i,r]=u.useState([]),[l,n]=u.useState(!1),[c,x]=u.useState([]),[m,y]=u.useState(""),[w,N]=u.useState("Health"),[b,g]=u.useState([]),[j,k]=u.useState([]),[A,S]=u.useState("morning"),[I,$]=u.useState(!1),[D,P]=u.useState(!1),[F,G]=u.useState(0);u.useEffect(()=>{B(),Y();const a=setInterval(()=>{G(o=>(o+1)%he.length)},8e3);return()=>clearInterval(a)},[]);const B=()=>{const a=localStorage.getItem("flowstate-habit-stacks");a&&r(JSON.parse(a))},Y=()=>{const a=localStorage.getItem("flowstate-habits");if(a){const o=JSON.parse(a);x(o.filter(h=>h.isActive))}},q=()=>{n(!0),y(""),g([]),k([]),N("Health"),S("morning")},p=a=>{const o={id:Date.now().toString(),habitId:a.id,name:a.name,order:b.length,isOptional:!1};g([...b,o]),$(!1),H.success(`Added "${a.name}" to stack`)},T=a=>{if(!a.trim())return;const o={id:Date.now().toString(),name:a.trim(),order:b.length,isOptional:!1};g([...b,o]),H.success(`Added "${a}" to stack`)},R=a=>{g(b.filter(o=>o.id!==a)),k(j.filter(o=>o.swapFromId!==a))},U=a=>{g(b.map(o=>o.id===a?{...o,isOptional:!o.isOptional}:o))},t=a=>{k(j.filter(o=>o.id!==a))},f=()=>{if(!m.trim()){H.error("Please give your stack a name");return}if(b.length<2){H.error("Add at least 2 habits to create a stack");return}const a={id:Date.now().toString(),name:m,lifeArea:w,habits:b,conditions:j,suggestedTimeSlot:A,createdAt:new Date().toISOString()},o=[...i,a];r(o),localStorage.setItem("flowstate-habit-stacks",JSON.stringify(o)),H.success(`Stack "${m}" created! ðŸŽ‰`),n(!1)},v=a=>{const o=i.filter(h=>h.id!==a);r(o),localStorage.setItem("flowstate-habit-stacks",JSON.stringify(o)),H.success("Stack deleted")};return e.jsx("div",{className:"min-h-screen pb-24 p-4 md:p-6 pt-8",style:{background:`linear-gradient(to bottom, ${s.gradientTo}, ${s.gradientFrom})`},children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(re,{size:32,style:{color:s.primary}}),e.jsx("h1",{children:"Habit Stacking"})]}),e.jsx("p",{className:"opacity-70",children:"Chain habits together for automatic routines"})]}),e.jsx(W,{mode:"wait",children:e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.4},className:"bg-amber-50 border-2 border-amber-200 rounded-3xl p-4 mb-6 flex items-start gap-3",children:[e.jsx(Me,{size:20,className:"text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:he[F]})]},F)}),!l&&e.jsxs(d.button,{onClick:q,className:"w-full bg-white rounded-3xl p-6 shadow-md mb-6 flex items-center justify-center gap-3 hover:shadow-lg transition-shadow border-2 border-dashed",style:{borderColor:s.primary},whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsx(V,{size:24,style:{color:s.primary}}),e.jsx("span",{style:{color:s.primary},children:"Create New Stack"})]}),e.jsx(W,{children:l&&e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-3xl shadow-lg p-6 mb-6 border-2",style:{borderColor:s.primary},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm opacity-60 mb-2",children:"Stack Name"}),e.jsx("input",{type:"text",value:m,onChange:a=>y(a.target.value),placeholder:"e.g., Morning Energy Routine",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 focus:outline-none focus:ring-2 transition-shadow",style:{focusRing:`0 0 0 2px ${s.primary}40`}})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm opacity-60 mb-2",children:"Life Area"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:oe.filter(a=>a.id!=="all").map(a=>e.jsxs("button",{onClick:()=>N(a.id),className:"px-4 py-2 rounded-full text-sm transition-all",style:w===a.id?{backgroundColor:s.primary,color:"white"}:{backgroundColor:"#F3F4F6",color:"#6B7280"},children:[a.emoji," ",a.label]},a.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm opacity-60 mb-2",children:[e.jsx(le,{size:16,className:"inline mr-1"}),"Suggested Time"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:se.map(a=>e.jsxs("button",{onClick:()=>S(a.id),className:"p-3 rounded-2xl text-center transition-all border-2",style:A===a.id?{backgroundColor:`${s.primary}20`,borderColor:s.primary}:{backgroundColor:"white",borderColor:"#E5E7EB"},children:[e.jsx("div",{className:"text-2xl mb-1",children:a.emoji}),e.jsx("div",{className:"text-sm",children:a.label}),e.jsx("div",{className:"text-xs opacity-60",children:a.description})]},a.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm opacity-60",children:["Your Habit Chain (",b.length,")"]}),e.jsxs("button",{onClick:()=>$(!I),className:"px-3 py-1.5 rounded-full text-sm flex items-center gap-1 transition-colors",style:{backgroundColor:`${s.primary}20`,color:s.primary},children:[e.jsx(V,{size:16}),"Add Habit"]})]}),e.jsx(W,{children:I&&e.jsxs(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 p-4 bg-gray-50 rounded-2xl",children:[e.jsx("p",{className:"text-sm opacity-60 mb-3",children:"Choose an existing habit or create a new one:"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("input",{type:"text",placeholder:"Type a habit name...",className:"w-full px-3 py-2 rounded-xl border border-gray-200 text-sm",onKeyDown:a=>{a.key==="Enter"&&(T(a.currentTarget.value),a.currentTarget.value="")}}),e.jsx("p",{className:"text-xs opacity-50 mt-1",children:"Press Enter to add"})]}),c.length>0&&e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:c.map(a=>e.jsxs("button",{onClick:()=>p(a),className:"w-full text-left px-3 py-2 rounded-xl bg-white hover:bg-gray-100 transition-colors text-sm flex items-center justify-between group",children:[e.jsx("span",{children:a.name}),e.jsx("span",{className:"text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"Add â†’"})]},a.id))})]})}),b.length>0?e.jsx(Ue,{axis:"y",values:b,onReorder:g,className:"space-y-3",children:b.map((a,o)=>e.jsxs(et,{value:a,className:"bg-gradient-to-r from-lavender-50 to-blue-50 rounded-2xl p-4 shadow-sm border border-lavender-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{size:20,className:"text-gray-400 cursor-grab active:cursor-grabbing"}),e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm flex-shrink-0",style:{backgroundColor:s.primary,color:"white"},children:o+1}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[o===0&&e.jsx("span",{className:"text-xs opacity-60",children:"After I"}),o>0&&o<b.length-1&&e.jsx("span",{className:"text-xs opacity-60",children:"then"}),o===b.length-1&&o>0&&e.jsx("span",{className:"text-xs opacity-60",children:"finally"}),e.jsx("span",{children:a.name}),a.isOptional&&e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"optional"})]})}),e.jsx("button",{onClick:()=>U(a.id),className:"p-2 rounded-lg hover:bg-white/50 transition-colors text-xs opacity-60 hover:opacity-100",children:a.isOptional?"Required":"Optional"}),e.jsx("button",{onClick:()=>R(a.id),className:"p-2 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(O,{size:16,className:"text-red-500"})})]}),o<b.length-1&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(me,{size:20,className:"text-lavender-400"})})]},a.id))}):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-2xl",children:e.jsx("p",{className:"text-sm opacity-60",children:"Add habits to start building your stack"})})]}),b.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm opacity-60 flex items-center gap-2",children:[e.jsx(te,{size:16}),"Optional Conditions"]}),e.jsxs("button",{onClick:()=>P(!D),className:"px-3 py-1.5 rounded-full text-sm flex items-center gap-1 transition-colors",style:{backgroundColor:`${s.primaryDark}20`,color:s.primaryDark},children:[e.jsx(V,{size:16}),"Add Condition"]})]}),e.jsx(W,{children:D&&e.jsxs(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 p-4 bg-blue-50 rounded-2xl border border-blue-200",children:[e.jsx("p",{className:"text-sm mb-3",children:"Create a smart swap based on conditions:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("select",{className:"w-full px-3 py-2 rounded-xl border border-gray-200 text-sm",children:[e.jsx("option",{value:"",children:"Select condition type..."}),e.jsx("option",{value:"weather",children:"If weather is rainy"}),e.jsx("option",{value:"energy",children:"If energy is low"}),e.jsx("option",{value:"time",children:"If running late"}),e.jsx("option",{value:"mood",children:"If mood is low"})]}),e.jsxs("div",{className:"flex gap-2 items-center text-sm",children:[e.jsx("span",{className:"opacity-60",children:"Swap"}),e.jsxs("select",{className:"flex-1 px-3 py-2 rounded-xl border border-gray-200",children:[e.jsx("option",{value:"",children:"Select habit..."}),b.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("span",{className:"opacity-60",children:"â†’"}),e.jsx("input",{type:"text",placeholder:"Alternative habit",className:"flex-1 px-3 py-2 rounded-xl border border-gray-200"})]}),e.jsx("button",{className:"w-full py-2 rounded-xl text-sm",style:{backgroundColor:s.primaryDark,color:"white"},children:"Add Condition"})]})]})}),j.length>0&&e.jsx("div",{className:"space-y-2",children:j.map(a=>{const o=b.find(h=>h.id===a.swapFromId);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-xl text-sm",children:[e.jsx(te,{size:16,className:"text-blue-600"}),e.jsxs("span",{className:"flex-1",children:[e.jsxs("span",{className:"opacity-60",children:["If ",a.condition,", swap "]}),e.jsx("span",{className:"font-medium",children:o?.name}),e.jsx("span",{className:"opacity-60",children:" â†’ "}),e.jsx("span",{className:"font-medium",children:a.swapToName})]}),e.jsx("button",{onClick:()=>t(a.id),className:"p-1 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(O,{size:14,className:"text-red-500"})})]},a.id)})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"flex-1 py-3 rounded-2xl border-2 border-gray-200 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:f,className:"flex-1 py-3 rounded-2xl text-white flex items-center justify-center gap-2 hover:opacity-90 transition-opacity",style:{backgroundColor:s.primary},children:[e.jsx(at,{size:20}),"Save Stack"]})]})]})}),i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"flex items-center gap-2",children:[e.jsx(K,{size:24,style:{color:s.primary}}),"Your Habit Stacks"]}),i.map((a,o)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"bg-white rounded-3xl shadow-md p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{children:a.name}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs",style:{backgroundColor:`${s.primary}20`,color:s.primary},children:[oe.find(h=>h.id===a.lifeArea)?.emoji," ",a.lifeArea]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-60",children:[e.jsx(le,{size:14}),se.find(h=>h.id===a.suggestedTimeSlot)?.emoji," ",se.find(h=>h.id===a.suggestedTimeSlot)?.label]})]}),e.jsx("button",{onClick:()=>v(a.id),className:"p-2 rounded-xl hover:bg-red-50 transition-colors",children:e.jsx(O,{size:20,className:"text-red-500"})})]}),e.jsx("div",{className:"space-y-2",children:a.habits.map((h,C)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-sm flex-shrink-0",style:{backgroundColor:`${s.primary}30`,color:s.primary},children:C+1}),e.jsxs("div",{className:"flex-1",children:[C===0&&e.jsx("span",{className:"text-xs opacity-60 mr-2",children:"After I"}),C>0&&C<a.habits.length-1&&e.jsx("span",{className:"text-xs opacity-60 mr-2",children:"then"}),C===a.habits.length-1&&C>0&&e.jsx("span",{className:"text-xs opacity-60 mr-2",children:"finally"}),e.jsx("span",{className:"text-sm",children:h.name}),h.isOptional&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full",children:"optional"})]})]}),C<a.habits.length-1&&e.jsx("div",{className:"flex justify-center py-1",children:e.jsx(me,{size:16,className:"text-gray-300"})})]},h.id))}),a.conditions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-xs opacity-60 mb-2 flex items-center gap-1",children:[e.jsx(Be,{size:12}),"Smart Swaps"]}),a.conditions.map(h=>{const C=a.habits.find(z=>z.id===h.swapFromId);return e.jsxs("div",{className:"text-xs bg-blue-50 rounded-lg p-2 mb-2",children:[e.jsx(te,{size:12,className:"inline text-blue-600 mr-1"}),"If ",h.condition,": ",C?.name," â†’ ",h.swapToName]},h.id)})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 flex gap-2",children:e.jsxs("button",{className:"flex-1 py-2 rounded-xl text-sm flex items-center justify-center gap-2",style:{backgroundColor:`${s.primary}20`,color:s.primary},children:[e.jsx(J,{size:16}),"Start Stack"]})})]},a.id))]}),i.length===0&&!l&&e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”—"}),e.jsx("h3",{className:"mb-2 opacity-80",children:"No habit stacks yet"}),e.jsx("p",{className:"text-sm opacity-60 mb-6",children:"Create your first stack to chain habits together"})]})]})})}const ae=["All","Health","Work","Relationships","Personal Growth","Creativity","Home"],dt=[{id:"1",name:"Morning Run",purpose:"Build cardiovascular health and start the day energized",frequency:"daily",trigger:"As soon as I wake up",motivation:"I want to feel strong and energetic all day",lifeArea:"Health",energyLevel:"high"},{id:"2",name:"Gym Workout",purpose:"Build strength and maintain physical fitness",frequency:"3x-week",trigger:"After work on Mon/Wed/Fri",motivation:"I want to feel confident in my body",lifeArea:"Health",energyLevel:"high"},{id:"3",name:"Hydration Check",purpose:"Stay properly hydrated throughout the day",frequency:"multiple-daily",timeSlots:[{id:"1",time:"morning",label:"Morning"},{id:"2",time:"afternoon",label:"Afternoon"},{id:"3",time:"evening",label:"Evening"}],trigger:"Set phone reminders",motivation:"I want clear skin and better energy",lifeArea:"Health",energyLevel:"low"},{id:"4",name:"Take Vitamins",purpose:"Support overall health with daily nutrients",frequency:"daily",trigger:"With breakfast every morning",motivation:"I want to support my immune system",lifeArea:"Health",energyLevel:"medium"},{id:"5",name:"Evening Walk",purpose:"Light exercise and stress relief",frequency:"daily",trigger:"After dinner",motivation:"I want to clear my mind and digest well",lifeArea:"Health",energyLevel:"medium"},{id:"6",name:"Stretch Routine",purpose:"Maintain flexibility and reduce tension",frequency:"daily",trigger:"Before bed",motivation:"I want to sleep better and reduce back pain",lifeArea:"Health",energyLevel:"medium"},{id:"7",name:"Deep Breathing",purpose:"Reduce stress and anxiety",frequency:"multiple-daily",timeSlots:[{id:"1",time:"morning",label:"Morning"},{id:"3",time:"evening",label:"Evening"}],trigger:"When feeling overwhelmed",motivation:"I want to feel calm and centered",lifeArea:"Health",energyLevel:"low"},{id:"8",name:"Mindful Tea Break",purpose:"Take a mindful pause in the day",frequency:"daily",trigger:"At 3pm with herbal tea",motivation:"I want to be more present and less reactive",lifeArea:"Health",energyLevel:"low"},{id:"9",name:"Daily Planning",purpose:"Set clear priorities and goals for the day",frequency:"daily",trigger:"First thing when I sit at my desk",motivation:"I want to be productive and focused",lifeArea:"Work",energyLevel:"high"},{id:"10",name:"Skill Building",purpose:"Continuously improve professional abilities",frequency:"3x-week",trigger:"During lunch break on Tue/Thu/Fri",motivation:"I want to advance my career",lifeArea:"Work",energyLevel:"high"},{id:"11",name:"Inbox Zero",purpose:"Keep email organized and manageable",frequency:"daily",trigger:"End of workday",motivation:"I want to feel in control and not overwhelmed",lifeArea:"Work",energyLevel:"medium"},{id:"12",name:"Weekly Review",purpose:"Reflect on accomplishments and plan ahead",frequency:"weekly",trigger:"Friday afternoon",motivation:"I want to continuously improve and grow",lifeArea:"Work",energyLevel:"medium"},{id:"13",name:"Desk Tidy",purpose:"Maintain an organized workspace",frequency:"daily",trigger:"Before leaving work",motivation:"I want to start each day fresh and organized",lifeArea:"Work",energyLevel:"low"},{id:"14",name:"Check in with Family",purpose:"Maintain close family connections",frequency:"daily",trigger:"During evening call time",motivation:"I want to be a caring family member",lifeArea:"Relationships",energyLevel:"medium"},{id:"15",name:"Text a Friend",purpose:"Nurture friendships with regular contact",frequency:"3x-week",trigger:"During commute home",motivation:"I want to be a good friend and feel connected",lifeArea:"Relationships",energyLevel:"medium"},{id:"16",name:"Gratitude for Partner",purpose:"Express appreciation and love",frequency:"daily",trigger:"Before saying goodnight",motivation:"I want a strong, loving relationship",lifeArea:"Relationships",energyLevel:"low"},{id:"17",name:"Morning Reading",purpose:"Learn something new every day",frequency:"daily",trigger:"With morning coffee",motivation:"I want to keep growing and learning",lifeArea:"Personal Growth",energyLevel:"high"},{id:"18",name:"Language Practice",purpose:"Build fluency in a new language",frequency:"daily",trigger:"During lunch break",motivation:"I want to connect with other cultures",lifeArea:"Personal Growth",energyLevel:"high"},{id:"19",name:"Journal Writing",purpose:"Process thoughts and emotions",frequency:"daily",trigger:"Right before bed",motivation:"I want to understand myself better",lifeArea:"Personal Growth",energyLevel:"medium"},{id:"20",name:"Meditation",purpose:"Develop mindfulness and inner peace",frequency:"daily",trigger:"First thing in the morning",motivation:"I want to be more calm and present",lifeArea:"Personal Growth",energyLevel:"medium"},{id:"21",name:"Positive Affirmation",purpose:"Build self-confidence and positivity",frequency:"daily",trigger:"Looking in the mirror each morning",motivation:"I want to love and believe in myself",lifeArea:"Personal Growth",energyLevel:"low"},{id:"22",name:"Creative Writing",purpose:"Express creativity and imagination",frequency:"3x-week",trigger:"Saturday morning with coffee",motivation:"I want to tell stories and express myself",lifeArea:"Creativity",energyLevel:"high"},{id:"23",name:"Art Practice",purpose:"Develop artistic skills and creativity",frequency:"3x-week",trigger:"Sunday afternoon",motivation:"I want to create beautiful things",lifeArea:"Creativity",energyLevel:"high"},{id:"24",name:"Photography Walk",purpose:"Practice photography and see beauty around me",frequency:"weekly",trigger:"Saturday morning",motivation:"I want to capture and share beautiful moments",lifeArea:"Creativity",energyLevel:"medium"},{id:"25",name:"Inspiration Collection",purpose:"Gather ideas and creative inspiration",frequency:"daily",trigger:"During evening wind-down",motivation:"I want to stay inspired and creative",lifeArea:"Creativity",energyLevel:"low"},{id:"26",name:"Kitchen Clean-up",purpose:"Maintain a clean and functional kitchen",frequency:"daily",trigger:"After dinner",motivation:"I want a peaceful and organized home",lifeArea:"Home",energyLevel:"medium"},{id:"27",name:"Laundry Day",purpose:"Keep clothes clean and organized",frequency:"weekly",trigger:"Sunday morning",motivation:"I want to always have clean clothes ready",lifeArea:"Home",energyLevel:"medium"},{id:"28",name:"Make Bed",purpose:"Start the day with accomplishment and order",frequency:"daily",trigger:"As soon as I get up",motivation:"I want my bedroom to feel peaceful",lifeArea:"Home",energyLevel:"low"},{id:"29",name:"5-Minute Tidy",purpose:"Maintain cleanliness without overwhelm",frequency:"daily",trigger:"Before sitting down to relax",motivation:"I want to feel calm in my space",lifeArea:"Home",energyLevel:"low"}];function mt(s){const r=new Set((s.completedSlots||[]).map(l=>l.date));if(s.frequency==="multiple-daily"&&s.timeSlots){let l=0,n=0;for(let c=0;c<30;c++){const x=new Date;x.setDate(x.getDate()-c);const m=x.toDateString();l+=s.timeSlots.length;const y=(s.completedSlots||[]).filter(w=>w.date===m).length;n+=y}return l>0?Math.round(n/l*100):0}if(s.frequency==="daily"){const n=Array.from({length:30},(c,x)=>{const m=new Date;return m.setDate(m.getDate()-x),m.toDateString()}).filter(c=>r.has(c)).length;return Math.round(n/30*100)}if(s.frequency==="weekly"){const n=Array.from({length:30},(x,m)=>{const y=new Date;return y.setDate(y.getDate()-m),y.toDateString()}).filter(x=>r.has(x)).length;return Math.round(n/4*100)}if(s.frequency==="3x-week"){const n=Array.from({length:30},(x,m)=>{const y=new Date;return y.setDate(y.getDate()-m),y.toDateString()}).filter(x=>r.has(x)).length;return Math.round(n/12*100)}return 0}function xt(s,i){return s===0&&i===0?"Ready to start? Every journey begins with a single step ðŸŒ±":s<20?`You showed up ${i} ${i===1?"day":"days"} â€” every attempt matters! ðŸ’œ`:s<40?`${s}% consistency â€” you're building momentum! Keep going ðŸŒŸ`:s<60?`${s}% consistency â€” you're creating real change! So proud ðŸŒ¸`:s<80?`${s}% consistency â€” this is becoming part of you! ðŸŒº`:`${s}% consistency â€” you're absolutely crushing it! ðŸŽ‰`}function pt({consistency:s,size:i=80}){const r=Math.min(Math.floor(s/10),10);return e.jsx("div",{className:"relative",style:{width:i,height:i},children:e.jsxs("svg",{width:i,height:i,viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#f3e8ff",strokeWidth:"2"}),Array.from({length:10}).map((l,n)=>{const c=(n*36-90)*(Math.PI/180),x=35,m=50+x*Math.cos(c),y=50+x*Math.sin(c),w=n<r;return e.jsxs(d.g,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:n*.05},children:[e.jsx("circle",{cx:m,cy:y,r:w?5:3,fill:w?"#a78bfa":"#e9d5ff",className:"transition-all duration-300"}),w&&e.jsx(d.circle,{cx:m,cy:y,r:5,fill:"#a78bfa",initial:{scale:1},animate:{scale:[1,1.3,1]},transition:{duration:1.5,repeat:1/0,delay:n*.1},opacity:.5})]},n)}),r>1&&Array.from({length:r-1}).map((l,n)=>{const c=(n*36-90)*(Math.PI/180),x=((n+1)*36-90)*(Math.PI/180),m=35,y=50+m*Math.cos(c),w=50+m*Math.sin(c),N=50+m*Math.cos(x),b=50+m*Math.sin(x);return e.jsx(d.line,{x1:y,y1:w,x2:N,y2:b,stroke:"#c4b5fd",strokeWidth:"1",opacity:"0.5",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:n*.05}},n)})]})})}function ye({percentage:s,size:i=60,strokeWidth:r=4,children:l}){const n=(i-r)/2,c=n*2*Math.PI,x=c-s/100*c;return e.jsxs("div",{className:"relative",style:{width:i,height:i},children:[e.jsxs("svg",{width:i,height:i,style:{transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:i/2,cy:i/2,r:n,fill:"none",stroke:"#f3e8ff",strokeWidth:r}),e.jsx(d.circle,{cx:i/2,cy:i/2,r:n,fill:"none",stroke:"#a78bfa",strokeWidth:r,strokeDasharray:c,strokeDashoffset:x,strokeLinecap:"round",initial:{strokeDashoffset:c},animate:{strokeDashoffset:x},transition:{duration:1,ease:"easeOut"}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l})]})}function wt({initialSelectedArea:s}={}){const{themeColors:i}=Q(),[r,l]=u.useState([]),[n,c]=u.useState(s||"All"),[x,m]=u.useState(!1),[y,w]=u.useState("All"),[N,b]=u.useState("All"),[g,j]=u.useState(null),[k,A]=u.useState(!1),[S,I]=u.useState(!1),[$,D]=u.useState("habits");u.useEffect(()=>{const t=localStorage.getItem("flowstate-habits");if(t){const v=JSON.parse(t),a=v.map(o=>({...o,lifeArea:o.lifeArea==="Self Care"?"Health":o.lifeArea,completedSlots:o.completedSlots||[],completedDates:void 0}));l(a),JSON.stringify(v)!==JSON.stringify(a)&&localStorage.setItem("flowstate-habits",JSON.stringify(a))}const f=localStorage.getItem("flowstate-habits-hide-completed");f&&A(JSON.parse(f))},[]),u.useEffect(()=>{s&&c(s)},[s]),u.useEffect(()=>{localStorage.setItem("flowstate-habits",JSON.stringify(r))},[r]);const P=r.filter(t=>n==="All"||t.lifeArea===n),G=dt.filter(t=>{const f=y==="All"||t.energyLevel===y.toLowerCase(),v=N==="All"||t.lifeArea===N;return f&&v}).filter(t=>N==="All"||t.lifeArea===N),B=t=>{const f={id:Date.now().toString(),name:t.name,purpose:t.purpose,frequency:t.frequency,timeSlots:t.timeSlots,trigger:t.trigger,motivation:t.motivation,lifeArea:t.lifeArea,streak:0,completedSlots:[],isActive:!0};l(v=>[...v,f]),m(!1),H.success("Habit added! Start your journey ðŸŒŸ")},Y=(t,f)=>{const v={id:Date.now().toString(),name:t,purpose:f,frequency:"daily",trigger:"When I feel like it",motivation:"To improve my wellbeing",lifeArea:"Health",streak:0,completedSlots:[],isActive:!0};l(a=>[...a,v]),H.success("AI suggestion added to your habits! ðŸŒŸ")},q=t=>{l(f=>f.map(v=>v.id===t.id?t:v)),H.success("Habit updated successfully")},p=t=>{l(f=>f.filter(v=>v.id!==t)),H.success("Habit removed")},T=t=>{l(f=>[...f,t]),I(!1),t.lifeArea&&t.lifeArea!=="All"&&c(t.lifeArea)},R=(t,f)=>{const v=new Date().toDateString();l(a=>a.map(o=>{if(o.id!==t)return o;const h={...o};h.completedSlots||(h.completedSlots=[]);const C=h.completedSlots.findIndex(L=>L.date===v&&(f?L.slotId===f:!L.slotId));C>=0?h.completedSlots.splice(C,1):h.completedSlots.push({date:v,...f&&{slotId:f}});const z=new Date;z.setDate(z.getDate()-1);const M=z.toDateString(),we=o.frequency==="multiple-daily"&&o.timeSlots?o.timeSlots.every(L=>h.completedSlots.some(_=>_.date===v&&_.slotId===L.id)):h.completedSlots.some(L=>L.date===v),Ne=o.frequency==="multiple-daily"&&o.timeSlots?o.timeSlots.every(L=>h.completedSlots.some(_=>_.date===M&&_.slotId===L.id)):h.completedSlots.some(L=>L.date===M);return we?h.streak=Ne?o.streak+1:1:h.streak=0,h}))};function U(t){switch(t){case"daily":return"Daily";case"multiple-daily":return"Multiple/day";case"weekly":return"Weekly";default:return t}}return $==="stacking"?e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:`${i.background}`},children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"flex gap-1 py-3",children:[e.jsxs("button",{onClick:()=>D("habits"),className:"flex-1 py-3 rounded-2xl text-sm transition-all flex items-center justify-center gap-2",style:{backgroundColor:"transparent",color:"#6B7280"},children:[e.jsx(E,{size:18}),"My Habits"]}),e.jsxs("button",{onClick:()=>D("stacking"),className:"flex-1 py-3 rounded-2xl text-sm transition-all flex items-center justify-center gap-2",style:{backgroundColor:i.primary,color:"white"},children:[e.jsx(re,{size:18}),"Habit Stacking"]})]})})}),e.jsx(ct,{})]}):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:`${i.background}`},children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"flex gap-1 py-3",children:[e.jsxs("button",{onClick:()=>D("habits"),className:"flex-1 py-3 rounded-2xl text-sm transition-all flex items-center justify-center gap-2",style:{backgroundColor:i.primary,color:"white"},children:[e.jsx(E,{size:18}),"My Habits"]}),e.jsxs("button",{onClick:()=>D("stacking"),className:"flex-1 py-3 rounded-2xl text-sm transition-all flex items-center justify-center gap-2",style:{backgroundColor:"transparent",color:"#6B7280"},children:[e.jsx(re,{size:18}),"Habit Stacking"]})]})})}),e.jsx("div",{className:"p-4 md:p-6 pt-8 md:pt-12 pb-32",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mb-1",children:"Habit Garden"}),e.jsxs("p",{className:"text-sm opacity-70",children:[r.length," habits growing"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm shadow-md transition-all",style:{backgroundColor:i.primary,color:"white"},children:[e.jsx(E,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Start from Goal"}),e.jsx("span",{className:"sm:hidden",children:"Goal"})]}),r.length>0&&e.jsxs("button",{onClick:()=>{const t=!k;A(t),localStorage.setItem("flowstate-habits-hide-completed",JSON.stringify(t))},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm transition-all hover:shadow-md",style:{backgroundColor:k?i.primary:"white",color:k?"white":i.primary,border:`1px solid ${k?i.primary:"#e5e7eb"}`},children:[k?e.jsx($e,{size:16}):e.jsx(qe,{size:16}),e.jsxs("span",{children:[k?"Show":"Hide"," completed"]})]})]})]})}),r.length>0&&e.jsx("div",{className:"mb-5",children:e.jsx(it,{habits:r})}),e.jsx(d.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>m(!0),className:"fixed bottom-24 right-6 w-16 h-16 rounded-full text-white shadow-2xl flex items-center justify-center z-30",style:{backgroundColor:i.primary},children:e.jsx(V,{size:28,strokeWidth:2.5})}),e.jsx("div",{className:"mb-4 -mx-4 md:-mx-6",children:e.jsx("div",{className:"overflow-x-auto px-4 md:px-6 pb-2 scrollbar-hide",children:e.jsx("div",{className:"flex gap-2 min-w-max",children:ae.map(t=>e.jsx("button",{onClick:()=>c(t),className:`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition-all flex-shrink-0 ${n===t?"text-white shadow-md":"bg-white/50 hover:bg-white"}`,style:n===t?{backgroundColor:i.primary}:void 0,children:t},t))})})}),r.length===0&&e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx(E,{size:48,className:"mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:"mb-2",children:"Plant Your First Habit"}),e.jsx("p",{className:"text-sm mb-6 opacity-70",children:"Turn your goals into achievable habits, or choose from 100+ templates"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{onClick:()=>I(!0),className:"px-6 py-3 rounded-xl text-white shadow-lg inline-flex items-center justify-center gap-2",style:{backgroundColor:i.primary},children:[e.jsx(E,{size:18}),"Start from Goal"]}),e.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-3 rounded-xl border-2 border-gray-300 hover:border-gray-400 transition-all inline-flex items-center justify-center gap-2",children:[e.jsx(V,{size:18}),"Browse Templates"]})]})]}),e.jsx("div",{className:"space-y-4",children:P.filter(t=>{if(!k)return!0;const f=new Date().toDateString();return!(t.frequency==="multiple-daily"&&t.timeSlots?t.timeSlots.every(a=>(t.completedSlots||[]).some(o=>o.date===f&&o.slotId===a.id)):(t.completedSlots||[]).some(a=>a.date===f))}).sort((t,f)=>{const v=new Date().toDateString(),a=t.frequency==="multiple-daily"&&t.timeSlots?t.timeSlots.every(h=>(t.completedSlots||[]).some(C=>C.date===v&&C.slotId===h.id)):(t.completedSlots||[]).some(h=>h.date===v),o=f.frequency==="multiple-daily"&&f.timeSlots?f.timeSlots.every(h=>(f.completedSlots||[]).some(C=>C.date===v&&C.slotId===h.id)):(f.completedSlots||[]).some(h=>h.date===v);return a===o?0:a?1:-1}).map(t=>{const f=new Date().toDateString(),v=mt(t),a=new Set((t.completedSlots||[]).map(z=>z.date)).size,o=xt(v,a),h=t.frequency==="multiple-daily"&&t.timeSlots?t.timeSlots.map(z=>({slot:z,completed:(t.completedSlots||[]).some(M=>M.date===f&&M.slotId===z.id)})):null,C=h?h.every(z=>z.completed):(t.completedSlots||[]).some(z=>z.date===f);return e.jsx(d.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-lg p-6 group hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(pt,{consistency:v,size:100})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"mb-1",children:t.name}),e.jsx("p",{className:"text-sm mb-3",style:{color:i.primary},children:t.purpose})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>{j(t),m(!0)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit habit",children:e.jsx(Re,{size:16,className:"opacity-50"})}),e.jsx("button",{onClick:()=>p(t.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors text-red-500",title:"Delete habit",children:e.jsx(We,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"px-3 py-1.5 rounded-full text-sm",style:{backgroundColor:`${i.primary}15`,color:i.primary},children:[v,"% consistency"]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-60",children:[e.jsx(ie,{size:12}),e.jsx("span",{children:U(t.frequency)})]}),e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:`${i.primary}10`,color:i.primary},children:t.lifeArea})]}),e.jsxs("div",{className:"px-4 py-2.5 rounded-xl text-sm flex items-start gap-2",style:{backgroundColor:"#fef3f2"},children:[e.jsx(K,{size:16,className:"flex-shrink-0 mt-0.5",style:{color:"#f97066"}}),e.jsx("span",{className:"opacity-80",children:o})]})]}),e.jsx("div",{className:"flex-shrink-0 flex flex-col items-center gap-2",children:h?e.jsx("div",{className:"flex flex-col gap-2",children:h.map(({slot:z,completed:M})=>e.jsx("button",{onClick:()=>R(t.id,z.id),className:"relative",children:e.jsx(ye,{percentage:M?100:0,size:56,strokeWidth:4,children:e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xs transition-all ${M?"bg-green-500 text-white":"border-2"}`,style:M?void 0:{borderColor:i.primary,color:i.primary},children:M?e.jsx(X,{size:16}):z.label[0]})})},z.id))}):e.jsx("button",{onClick:()=>R(t.id),className:"relative",children:e.jsx(ye,{percentage:C?100:0,size:72,strokeWidth:5,children:e.jsx(d.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${C?"bg-green-500 text-white":"border-2"}`,style:C?void 0:{borderColor:i.primary,color:i.primary},children:C?e.jsx(X,{size:24,strokeWidth:3}):e.jsx(J,{size:28})})})})})]})},t.id)})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl max-w-4xl w-full h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{children:g?"Edit Habit":"Habit Templates"}),e.jsx("p",{className:"text-sm opacity-70 mt-1",children:g?"Customize your habit":"Choose a template or create your own"})]}),e.jsx("button",{onClick:()=>{m(!1),j(null)},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(O,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 min-h-0",children:g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Habit Name"}),e.jsx("input",{type:"text",value:g.name,onChange:t=>j({...g,name:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2",style:{"--tw-ring-color":i.primary}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Purpose / Why it matters"}),e.jsx("textarea",{value:g.purpose,onChange:t=>j({...g,purpose:t.target.value}),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 resize-none",style:{"--tw-ring-color":i.primary},rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Life Area"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae.filter(t=>t!=="All").map(t=>e.jsx("button",{onClick:()=>j({...g,lifeArea:t}),className:`px-4 py-2.5 rounded-xl text-sm transition-all ${g.lifeArea===t?"text-white shadow-md":"bg-gray-100 hover:bg-gray-200"}`,style:g.lifeArea===t?{backgroundColor:i.primary}:void 0,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Frequency"}),e.jsx("div",{className:"space-y-2",children:[{value:"daily",label:"Daily"},{value:"multiple-daily",label:"Multiple times per day"},{value:"weekly",label:"Weekly"}].map(({value:t,label:f})=>e.jsx("button",{onClick:()=>{const v={...g,frequency:t};t==="multiple-daily"&&!v.timeSlots&&(v.timeSlots=[{id:"1",label:"Morning",time:"morning"},{id:"2",label:"Evening",time:"evening"}]),j(v)},className:`w-full px-4 py-2.5 rounded-xl text-sm transition-all text-left ${g.frequency===t?"text-white shadow-md":"bg-gray-100 hover:bg-gray-200"}`,style:g.frequency===t?{backgroundColor:i.primary}:void 0,children:f},t))})]}),g.frequency==="multiple-daily"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",children:"Time Slots"}),e.jsx("div",{className:"space-y-2",children:g.timeSlots?.map((t,f)=>e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{type:"text",value:t.label,onChange:v=>{const a={...g};a.timeSlots&&(a.timeSlots[f].label=v.target.value,j(a))},className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:outline-none focus:ring-2",style:{"--tw-ring-color":i.primary},placeholder:"Label (e.g., Morning)"})},t.id))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{q(g),m(!1),j(null)},className:"flex-1 px-6 py-3 rounded-xl text-white shadow-lg",style:{backgroundColor:i.primary},children:"Save Changes"}),e.jsx("button",{onClick:()=>{m(!1),j(null)},className:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:["All","High","Medium","Low"].map(t=>e.jsxs("button",{onClick:()=>w(t),className:`px-4 py-2 transition-all ${y===t?"border-b-2 -mb-px":"opacity-50 hover:opacity-75"}`,style:y===t?{borderColor:i.primary,color:i.primary}:void 0,children:[t," Energy"]},t))}),e.jsx("div",{className:"-mx-6",children:e.jsx("div",{className:"overflow-x-auto px-6 pb-2 scrollbar-hide",children:e.jsx("div",{className:"flex gap-2 min-w-max",children:ae.map(t=>e.jsx("button",{onClick:()=>b(t),className:`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap transition-all flex-shrink-0 ${N===t?"text-white shadow-md":"bg-gray-100 hover:bg-gray-200"}`,style:N===t?{backgroundColor:i.primary}:void 0,children:t},t))})})}),e.jsx("div",{className:"grid gap-3",children:G.map(t=>e.jsxs("button",{onClick:()=>B(t),className:"text-left p-4 rounded-xl border-2 border-gray-200 hover:border-lavender-300 transition-all hover:shadow-md group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{children:t.name}),e.jsx("div",{className:"px-2 py-0.5 rounded-full bg-lavender-100 text-lavender-700 text-xs",children:t.lifeArea})]}),e.jsx("p",{className:"text-xs opacity-60 mb-2",children:t.purpose}),e.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-50",children:[e.jsx(ie,{size:12}),e.jsx("span",{children:U(t.frequency)}),t.energyLevel&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[t.energyLevel," energy"]})]})]})]},t.id))})]})})]})})]})}),!x&&e.jsx(rt,{position:"bottom-left",onAddHabit:Y}),S&&e.jsx(ot,{onComplete:T,onClose:()=>I(!1)})]})}export{wt as HabitBuilderScreen};
